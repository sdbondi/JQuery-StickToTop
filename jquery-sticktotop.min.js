(function(e,t){"use strict";t.fn.stickToTop=function(n){n=t.extend({scrollParent:window,offset:{top:0,left:0},minParentHeight:false,minParentWidth:false,preserveLayout:true,bottomBound:false,onStick:null,onDetach:null},n,true);var r=n.scrollParent,i=0,s=t(r===window?r.document.body:r).offset();return t(this).each(function(){var o=this,u=t(o),a=u.position(),f=u.css("position"),l=u.outerWidth(true),c=u.outerHeight(true),h=false,p=false,d,v=function(){var h=r.scrollTop||t(e).scrollTop(),p=(r==window?window.document.body:r).offsetHeight,v=(r==window?window.document.body:r).offsetWidth,m=n.bottomBound&&p-n.bottomBound-c,g=!!m&&m<h,y=h>=a.top-n.offset.top+s.top,b=!y;if(n.minParentWidth&&v<n.minParentWidth){b=true;y=false}y=y&&!g;if(g&&i!==1){var w=u.position();u.css({position:"absolute",top:m+"px",left:w.left+"px"});i=1;if(n.onDetach){n.onDetach.call(o)}return}if(b&&i!==2||n.minParentHeight&&p<n.minParentHeight){var E={position:f};if(f==="static"){u.removeAttr("style");if(d&&v<n.minParentWidth){d.removeAttr("style")}}else{t.extend(E,{top:a.top+"px",left:a.left+"px"})}u.css(E);i=2;if(n.onDetach){n.onDetach.call(o)}return}if(y&&i!==3){u.css({position:"fixed",top:s.top+(n.offset.top||0)+"px",left:s.left+a.left+(n.offset.left||0)+"px",width:l+"px","z-index":1e3});i=3;if(n.onStick){n.onStick.call(o)}return}},m=function(e){var t=c;if(h){return}h=true;window.setTimeout(function(){if(p){return}var e=u.css("position");a.left=u.css("position",f).position().left;u.css({position:e,width:"auto"});if(n.preserveLayout){d.css({width:"auto",height:"auto"});l=d.outerWidth(true);t=d.outerHeight(true);if(t!==0){c=t}d.css({width:l+"px",height:c+"px"})}u.css({width:l,height:c});i="";v();h=false},50)};t(window).on("resize",m);if(f==="relative"){f="static"}t(n.scrollParent).on("scroll",v);if(n.preserveLayout){d=t("<div></div>").css({height:c,width:l});d=u.wrap(d).parent()}this.unstickToTop=function(){p=true;t(n.scrollParent).off("scroll",v);t(window).off("resize",m)}})}})(window.document,window.jQuery)